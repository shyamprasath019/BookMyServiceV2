{"ast":null,"code":"var _jsxFileName = \"D:\\\\Data\\\\Project\\\\claude ai\\\\BookMyServiceV2\\\\client\\\\src\\\\pages\\\\Messages.js\",\n  _s = $RefreshSig$();\n// client/src/pages/Messages.js\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\nimport api from '../utils/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Messages = () => {\n  _s();\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const [conversations, setConversations] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filteredConversations, setFilteredConversations] = useState([]);\n  const [selectedTab, setSelectedTab] = useState('all');\n  useEffect(() => {\n    fetchConversations();\n  }, []);\n  useEffect(() => {\n    // Filter conversations based on search query and selected tab\n    if (conversations.length > 0) {\n      let filtered = [...conversations];\n\n      // Filter by tab\n      if (selectedTab === 'orders') {\n        filtered = filtered.filter(conv => conv.order);\n      } else if (selectedTab === 'unread') {\n        filtered = filtered.filter(conv => conv.unreadCount > 0);\n      }\n\n      // Filter by search query\n      if (searchQuery.trim() !== '') {\n        const query = searchQuery.toLowerCase();\n        filtered = filtered.filter(conv => {\n          const otherUser = conv.participants.find(p => p._id !== currentUser._id);\n\n          // Search by user name\n          if (otherUser.username.toLowerCase().includes(query)) {\n            return true;\n          }\n\n          // Search by order title\n          if (conv.order && conv.order.title.toLowerCase().includes(query)) {\n            return true;\n          }\n\n          // Search in last message\n          if (conv.lastMessage && conv.lastMessage.content && conv.lastMessage.content.toLowerCase().includes(query)) {\n            return true;\n          }\n          return false;\n        });\n      }\n      setFilteredConversations(filtered);\n    }\n  }, [conversations, searchQuery, selectedTab, currentUser]);\n  const fetchConversations = async () => {\n    setIsLoading(true);\n    try {\n      const response = await api.get('/messages/conversations');\n      setConversations(response.data);\n      setFilteredConversations(response.data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to load conversations');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Get the other participant for each conversation\n  const getOtherParticipant = conversation => {\n    return conversation.participants.find(participant => participant._id !== currentUser._id);\n  };\n\n  // Format timestamp to show either time or date\n  const formatTime = timestamp => {\n    const messageDate = new Date(timestamp);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n    if (messageDate.toDateString() === today.toDateString()) {\n      // Today, show time\n      return messageDate.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } else if (messageDate.toDateString() === yesterday.toDateString()) {\n      // Yesterday\n      return 'Yesterday';\n    } else {\n      // Other days, show date\n      return messageDate.toLocaleDateString([], {\n        month: 'short',\n        day: 'numeric'\n      });\n    }\n  };\n  const handleSearchChange = e => {\n    setSearchQuery(e.target.value);\n  };\n  const clearSearch = () => {\n    setSearchQuery('');\n  };\n  const handleTabChange = tab => {\n    setSelectedTab(tab);\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"ml-2\",\n        children: \"Loading conversations...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto mt-20 p-8 bg-white shadow rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 text-red-700 p-4 rounded mb-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/dashboard'),\n        className: \"text-blue-500 hover:underline\",\n        children: \"\\u2190 Back to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this);\n  }\n  const totalUnread = conversations.reduce((sum, conv) => sum + (conv.unreadCount || 0), 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto mt-20\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow rounded-lg overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-500 text-white p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold\",\n          children: \"Messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-gray-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col md:flex-row md:justify-between md:items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `px-3 py-1.5 rounded-full transition ${selectedTab === 'all' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,\n              onClick: () => handleTabChange('all'),\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `px-3 py-1.5 rounded-full transition flex items-center ${selectedTab === 'unread' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,\n              onClick: () => handleTabChange('unread'),\n              children: [\"Unread\", totalUnread > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\",\n                children: totalUnread\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `px-3 py-1.5 rounded-full transition ${selectedTab === 'orders' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,\n              onClick: () => handleTabChange('orders'),\n              children: \"Orders\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative w-full md:w-60\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"w-full bg-gray-100 border border-gray-300 rounded-full pl-10 pr-10 py-2 focus:outline-none focus:border-blue-500\",\n              placeholder: \"Search messages...\",\n              value: searchQuery,\n              onChange: handleSearchChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), searchQuery && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700\",\n              onClick: clearSearch,\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M6 18L18 6M6 6l12 12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), filteredConversations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 text-center\",\n        children: conversations.length === 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-6xl mb-4\",\n            children: \"\\uD83D\\uDCAC\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 mb-4\",\n            children: \"You don't have any messages yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/dashboard\",\n            className: \"text-blue-500 hover:underline\",\n            children: \"\\u2190 Back to Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-6xl mb-4\",\n            children: \"\\uD83D\\uDD0D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 mb-4\",\n            children: \"No conversations found matching your search criteria.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: clearSearch,\n            className: \"text-blue-500 hover:underline\",\n            children: \"Clear search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"divide-y max-h-[calc(100vh-300px)] overflow-y-auto\",\n        children: filteredConversations.map(conversation => {\n          var _conversation$lastMes;\n          const otherParticipant = getOtherParticipant(conversation);\n          const hasUnread = conversation.unreadCount > 0;\n          return /*#__PURE__*/_jsxDEV(Link, {\n            to: `/messages/${conversation._id}`,\n            className: `block p-4 hover:bg-gray-50 transition ${hasUnread ? 'bg-blue-50' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h-12 w-12 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold mr-4 overflow-hidden\",\n                  children: otherParticipant !== null && otherParticipant !== void 0 && otherParticipant.profileImage ? /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: otherParticipant.profileImage,\n                    alt: otherParticipant.username,\n                    className: \"h-12 w-12 rounded-full object-cover\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 259,\n                    columnNumber: 27\n                  }, this) : otherParticipant === null || otherParticipant === void 0 ? void 0 : otherParticipant.username.charAt(0).toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 23\n                }, this), hasUnread && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center border-2 border-white\",\n                  children: conversation.unreadCount\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: `text-sm font-medium truncate ${hasUnread ? 'text-blue-700 font-semibold' : 'text-gray-900'}`,\n                    children: otherParticipant === null || otherParticipant === void 0 ? void 0 : otherParticipant.username\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-500 whitespace-nowrap ml-2\",\n                    children: formatTime(conversation.updatedAt)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 23\n                }, this), conversation.order && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center mt-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `text-xs px-2 py-0.5 rounded-full ${conversation.order.status === 'completed' ? 'bg-green-100 text-green-800' : conversation.order.status === 'in_progress' ? 'bg-blue-100 text-blue-800' : conversation.order.status === 'pending' ? 'bg-yellow-100 text-yellow-800' : conversation.order.status === 'under_review' ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'}`,\n                    children: [\"Order: \", conversation.order.status.replace('_', ' ')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 287,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-gray-500 ml-2 truncate\",\n                    children: conversation.order.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: `text-sm truncate mt-1 ${hasUnread ? 'text-gray-900' : 'text-gray-500'}`,\n                  children: conversation.lastMessage ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [conversation.lastMessage.sender._id === currentUser._id && \"You: \", conversation.lastMessage.content ? conversation.lastMessage.content : (_conversation$lastMes = conversation.lastMessage.attachments) !== null && _conversation$lastMes !== void 0 && _conversation$lastMes.length ? `${conversation.lastMessage.attachments.length} attachment${conversation.lastMessage.attachments.length !== 1 ? 's' : ''}` : 'Empty message']\n                  }, void 0, true) : 'No messages yet'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 19\n            }, this)\n          }, conversation._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n_s(Messages, \"vETTwQjCrkgCfWQYADTCBxzZimE=\", false, function () {\n  return [useNavigate];\n});\n_c = Messages;\nexport default Messages;\nvar _c;\n$RefreshReg$(_c, \"Messages\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Link","useNavigate","AuthContext","api","jsxDEV","_jsxDEV","Fragment","_Fragment","Messages","_s","currentUser","navigate","conversations","setConversations","isLoading","setIsLoading","error","setError","searchQuery","setSearchQuery","filteredConversations","setFilteredConversations","selectedTab","setSelectedTab","fetchConversations","length","filtered","filter","conv","order","unreadCount","trim","query","toLowerCase","otherUser","participants","find","p","_id","username","includes","title","lastMessage","content","response","get","data","err","_err$response","_err$response$data","message","getOtherParticipant","conversation","participant","formatTime","timestamp","messageDate","Date","today","yesterday","setDate","getDate","toDateString","toLocaleTimeString","hour","minute","toLocaleDateString","month","day","handleSearchChange","e","target","value","clearSearch","handleTabChange","tab","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","totalUnread","reduce","sum","type","placeholder","onChange","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","to","map","_conversation$lastMes","otherParticipant","hasUnread","profileImage","src","alt","charAt","toUpperCase","updatedAt","status","replace","sender","attachments","_c","$RefreshReg$"],"sources":["D:/Data/Project/claude ai/BookMyServiceV2/client/src/pages/Messages.js"],"sourcesContent":["// client/src/pages/Messages.js\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport api from '../utils/api';\r\n\r\nconst Messages = () => {\r\n  const { currentUser } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  \r\n  const [conversations, setConversations] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [filteredConversations, setFilteredConversations] = useState([]);\r\n  const [selectedTab, setSelectedTab] = useState('all');\r\n  \r\n  useEffect(() => {\r\n    fetchConversations();\r\n  }, []);\r\n  \r\n  useEffect(() => {\r\n    // Filter conversations based on search query and selected tab\r\n    if (conversations.length > 0) {\r\n      let filtered = [...conversations];\r\n      \r\n      // Filter by tab\r\n      if (selectedTab === 'orders') {\r\n        filtered = filtered.filter(conv => conv.order);\r\n      } else if (selectedTab === 'unread') {\r\n        filtered = filtered.filter(conv => conv.unreadCount > 0);\r\n      }\r\n      \r\n      // Filter by search query\r\n      if (searchQuery.trim() !== '') {\r\n        const query = searchQuery.toLowerCase();\r\n        filtered = filtered.filter(conv => {\r\n          const otherUser = conv.participants.find(p => p._id !== currentUser._id);\r\n          \r\n          // Search by user name\r\n          if (otherUser.username.toLowerCase().includes(query)) {\r\n            return true;\r\n          }\r\n          \r\n          // Search by order title\r\n          if (conv.order && conv.order.title.toLowerCase().includes(query)) {\r\n            return true;\r\n          }\r\n          \r\n          // Search in last message\r\n          if (conv.lastMessage && conv.lastMessage.content && \r\n              conv.lastMessage.content.toLowerCase().includes(query)) {\r\n            return true;\r\n          }\r\n          \r\n          return false;\r\n        });\r\n      }\r\n      \r\n      setFilteredConversations(filtered);\r\n    }\r\n  }, [conversations, searchQuery, selectedTab, currentUser]);\r\n  \r\n  const fetchConversations = async () => {\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await api.get('/messages/conversations');\r\n      setConversations(response.data);\r\n      setFilteredConversations(response.data);\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to load conversations');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Get the other participant for each conversation\r\n  const getOtherParticipant = (conversation) => {\r\n    return conversation.participants.find(\r\n      participant => participant._id !== currentUser._id\r\n    );\r\n  };\r\n  \r\n  // Format timestamp to show either time or date\r\n  const formatTime = (timestamp) => {\r\n    const messageDate = new Date(timestamp);\r\n    const today = new Date();\r\n    const yesterday = new Date(today);\r\n    yesterday.setDate(yesterday.getDate() - 1);\r\n    \r\n    if (messageDate.toDateString() === today.toDateString()) {\r\n      // Today, show time\r\n      return messageDate.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n    } else if (messageDate.toDateString() === yesterday.toDateString()) {\r\n      // Yesterday\r\n      return 'Yesterday';\r\n    } else {\r\n      // Other days, show date\r\n      return messageDate.toLocaleDateString([], { month: 'short', day: 'numeric' });\r\n    }\r\n  };\r\n  \r\n  const handleSearchChange = (e) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n  \r\n  const clearSearch = () => {\r\n    setSearchQuery('');\r\n  };\r\n  \r\n  const handleTabChange = (tab) => {\r\n    setSelectedTab(tab);\r\n  };\r\n  \r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center py-12\">\r\n        <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\r\n        <p className=\"ml-2\">Loading conversations...</p>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (error) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto mt-20 p-8 bg-white shadow rounded-lg\">\r\n        <div className=\"bg-red-100 text-red-700 p-4 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n        <button\r\n          onClick={() => navigate('/dashboard')}\r\n          className=\"text-blue-500 hover:underline\"\r\n        >\r\n          &larr; Back to Dashboard\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  const totalUnread = conversations.reduce((sum, conv) => sum + (conv.unreadCount || 0), 0);\r\n  \r\n  return (\r\n    <div className=\"max-w-4xl mx-auto mt-20\">\r\n      <div className=\"bg-white shadow rounded-lg overflow-hidden\">\r\n        <div className=\"bg-blue-500 text-white p-4\">\r\n          <h1 className=\"text-xl font-bold\">Messages</h1>\r\n        </div>\r\n        \r\n        {/* Tabs and Search */}\r\n        <div className=\"p-4 border-b border-gray-200\">\r\n          <div className=\"flex flex-col md:flex-row md:justify-between md:items-center gap-3\">\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              <button\r\n                className={`px-3 py-1.5 rounded-full transition ${\r\n                  selectedTab === 'all' \r\n                    ? 'bg-blue-100 text-blue-700' \r\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                }`}\r\n                onClick={() => handleTabChange('all')}\r\n              >\r\n                All\r\n              </button>\r\n              <button\r\n                className={`px-3 py-1.5 rounded-full transition flex items-center ${\r\n                  selectedTab === 'unread' \r\n                    ? 'bg-blue-100 text-blue-700' \r\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                }`}\r\n                onClick={() => handleTabChange('unread')}\r\n              >\r\n                Unread\r\n                {totalUnread > 0 && (\r\n                  <span className=\"ml-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\r\n                    {totalUnread}\r\n                  </span>\r\n                )}\r\n              </button>\r\n              <button\r\n                className={`px-3 py-1.5 rounded-full transition ${\r\n                  selectedTab === 'orders' \r\n                    ? 'bg-blue-100 text-blue-700' \r\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                }`}\r\n                onClick={() => handleTabChange('orders')}\r\n              >\r\n                Orders\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"relative w-full md:w-60\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"w-full bg-gray-100 border border-gray-300 rounded-full pl-10 pr-10 py-2 focus:outline-none focus:border-blue-500\"\r\n                placeholder=\"Search messages...\"\r\n                value={searchQuery}\r\n                onChange={handleSearchChange}\r\n              />\r\n              <div className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                </svg>\r\n              </div>\r\n              {searchQuery && (\r\n                <button\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700\"\r\n                  onClick={clearSearch}\r\n                >\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {filteredConversations.length === 0 ? (\r\n          <div className=\"p-8 text-center\">\r\n            {conversations.length === 0 ? (\r\n              <>\r\n                <div className=\"text-6xl mb-4\">💬</div>\r\n                <p className=\"text-gray-500 mb-4\">You don't have any messages yet.</p>\r\n                <Link\r\n                  to=\"/dashboard\"\r\n                  className=\"text-blue-500 hover:underline\"\r\n                >\r\n                  &larr; Back to Dashboard\r\n                </Link>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <div className=\"text-6xl mb-4\">🔍</div>\r\n                <p className=\"text-gray-500 mb-4\">No conversations found matching your search criteria.</p>\r\n                <button\r\n                  onClick={clearSearch}\r\n                  className=\"text-blue-500 hover:underline\"\r\n                >\r\n                  Clear search\r\n                </button>\r\n              </>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"divide-y max-h-[calc(100vh-300px)] overflow-y-auto\">\r\n            {filteredConversations.map(conversation => {\r\n              const otherParticipant = getOtherParticipant(conversation);\r\n              const hasUnread = conversation.unreadCount > 0;\r\n              \r\n              return (\r\n                <Link\r\n                  key={conversation._id}\r\n                  to={`/messages/${conversation._id}`}\r\n                  className={`block p-4 hover:bg-gray-50 transition ${hasUnread ? 'bg-blue-50' : ''}`}\r\n                >\r\n                  <div className=\"flex items-center\">\r\n                    <div className=\"relative\">\r\n                      <div className=\"h-12 w-12 rounded-full bg-blue-500 text-white flex items-center justify-center font-bold mr-4 overflow-hidden\">\r\n                        {otherParticipant?.profileImage ? (\r\n                          <img\r\n                            src={otherParticipant.profileImage}\r\n                            alt={otherParticipant.username}\r\n                            className=\"h-12 w-12 rounded-full object-cover\"\r\n                          />\r\n                        ) : (\r\n                          otherParticipant?.username.charAt(0).toUpperCase()\r\n                        )}\r\n                      </div>\r\n                      {hasUnread && (\r\n                        <div className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center border-2 border-white\">\r\n                          {conversation.unreadCount}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex justify-between items-center\">\r\n                        <h3 className={`text-sm font-medium truncate ${hasUnread ? 'text-blue-700 font-semibold' : 'text-gray-900'}`}>\r\n                          {otherParticipant?.username}\r\n                        </h3>\r\n                        <span className=\"text-xs text-gray-500 whitespace-nowrap ml-2\">\r\n                          {formatTime(conversation.updatedAt)}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      {conversation.order && (\r\n                        <div className=\"flex items-center mt-1\">\r\n                          <span className={`text-xs px-2 py-0.5 rounded-full ${\r\n                            conversation.order.status === 'completed' \r\n                            ? 'bg-green-100 text-green-800' \r\n                            : conversation.order.status === 'in_progress' \r\n                            ? 'bg-blue-100 text-blue-800' \r\n                            : conversation.order.status === 'pending' \r\n                            ? 'bg-yellow-100 text-yellow-800'\r\n                            : conversation.order.status === 'under_review'\r\n                            ? 'bg-purple-100 text-purple-800'  \r\n                            : 'bg-gray-100 text-gray-800'\r\n                        }`}>\r\n                          Order: {conversation.order.status.replace('_', ' ')}\r\n                        </span>\r\n                        <span className=\"text-xs text-gray-500 ml-2 truncate\">\r\n                          {conversation.order.title}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    <p className={`text-sm truncate mt-1 ${hasUnread ? 'text-gray-900' : 'text-gray-500'}`}>\r\n                      {conversation.lastMessage ? (\r\n                        <>\r\n                          {conversation.lastMessage.sender._id === currentUser._id && \"You: \"}\r\n                          {conversation.lastMessage.content ? (\r\n                            conversation.lastMessage.content\r\n                          ) : (\r\n                            conversation.lastMessage.attachments?.length ? (\r\n                              `${conversation.lastMessage.attachments.length} attachment${conversation.lastMessage.attachments.length !== 1 ? 's' : ''}`\r\n                            ) : 'Empty message'\r\n                          )}\r\n                        </>\r\n                      ) : (\r\n                        'No messages yet'\r\n                      )}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n};\r\n\r\nexport default Messages;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}